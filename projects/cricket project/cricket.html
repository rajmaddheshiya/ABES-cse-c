<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cricket Game</title>
  <link rel="stylesheet" href="cricket.css">
</head>
<body>
  <div class="container">
  <div class="header">
  <h1> Bat Ball Stump Game</h1>
  </div>

  <button class="choice-button" onclick="
  let computerchoice = generatecomputerchoice();
  let resultMsg = getresult('Bat',computerchoice);
   showresult('Bat',computerchoice,resultMsg);
  " ><img src="bat.webp" alt="bat Image" class="choice-image"></button>


  <button class="choice-button" onclick="
    computerchoice = generatecomputerchoice();
    resultMsg = getresult('Ball',computerchoice);
    showresult('Ball',computerchoice,resultMsg);
   " ><img src="balls.png" alt="ball Image" class="choice-image"></button>


  <button class="choice-button" onclick="
    computerchoice=generatecomputerchoice();
    resultMsg = getresult('Stump',computerchoice);
    showresult('Stump',computerchoice,resultMsg);
"><img src="stump2.png" alt="stump Image" class="choice-image"></button>


<h3 id="User-move"></h3>
<h3 id="Computer-move"></h3>
<h3 id="result"></h3>
<h3 id="score"></h3>

<button onclick="
localStorage.clear()
resetscore(localStorage.getItem('score'));
"><img src="resetbutton.png" alt="reset button" id="reset-button"></button>

</div>

<!-- here the generatecomputerchoice is converted into a function  -->

<script>
  let score;
let scoreStr = localStorage.getItem('score');
  resetscore(scoreStr);
  
function resetscore(scoreStr) {
    score = JSON.parse(scoreStr) || {
      win:0,
      lost:0,
      tie:0,
   };
  
    score.displayscore = function () {
      return `Score: Won:${score.win}, Lost:${score.lost}, Tie:${score.tie}`;
    };
    showresult();
  }

  function generatecomputerchoice(){
 let randomNumber = Math.random()*3;
  if(randomNumber>0 && randomNumber<=1){
    return 'Bat';
  }
  else if(randomNumber>1 && randomNumber<=2){
     return 'Ball';
  }
  else{
     return 'Stump';
  }
  return choice;
  }

function getresult(usermove,computermove){
  if(usermove==='Bat'){
    if(computermove === 'Ball'){
      score.win++;
    return 'User won.';
    }
    else if(computermove === 'Stump'){
       score.lost++;
      return 'Computer won.';
    }
    else {
      score.tie++;
    return 'Match tie.';
    }
  }
  else if(usermove==='Ball'){
    if(computermove==='Bat'){
      score.lost++;
      return 'Computer Won.';
    }
    else if(computermove==='Ball'){
      score.tie++;
      return 'Match tie.';
    }
    else{
      score.win++;
      return 'User Won.';
    }
  }

  else{
    if(computermove==='Bat'){
      score.win++;
      return 'User Won.';
    }
    else if(computermove==='Ball'){
      score.lost++;
    return 'Computer Won.';
    }
    else{
      score.tie++;
    return 'Match Tie.';
    }
  }
}

function showresult(usermove,computermove,result){
  // console.log(score);
localStorage.setItem('score',JSON.stringify(score));

document.querySelector(`#User-move`).innerText = usermove ?  `You have choosen ${usermove}`:'';

document.querySelector('#Computer-move').innerText = computermove ? `Computer choice is ${computermove}`:'';

document.querySelector('#result').innerText =result || '';

document.querySelector(`#score`).innerText = score.displayscore();
// alert(`You have chosen ${usermove}. Computer choice is ${computermove} 

// ${result}

// ${score.displayscore()}`);
}

</script>
</body>
</html>

